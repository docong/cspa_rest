name: LRC
title: Linear Rule Checking
description: |
  Linear Rule Checking
version: 0.0.1
wd: .
input:
  data:
    name: data
    type: url
    description: |
      url to csv file with data to be checked
      Data should be numeric
    required: yes
  metadata:
    name: metadata
    type: url
    description: |
      url to ddi instance of structure of data
    required: no
  rules:
    name: rules
    type: url
    description: |
      url to text file with rules to be used in checking
      LRC supports several rules
    required: yes
result:
  title: Results of this service
  type: object
  properties:
    checks:
      title: checks
      type: "object"
      description: |
        Contains data and meta data to the results of checking the record
      properties: 
        data: 
          type: string
          description: |
            url to a csv file that is generated by LRC
          mimetype: "text/csv"
          filename: checks.csv
          value: "{job.url}/result/checks/data"
        meta: 
          type: string
          description: |
            url to a ddi file that is generated by LRC
          mimetype: "application/xml"
          filename: checks_meta.xml
          value: "{job.url}/result/checks/meta"
        type:
          type: string
          value: "ddi+csv"
command: >
  Rscript {service.servicedir}/LRC.R
  --data {job.input.data}
  --rules {job.input.rules}
  --checks checks.csv

