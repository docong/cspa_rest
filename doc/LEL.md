---
author: "Jan van der Laan, Edwin de Jonge"
title: REST API for Linear Error Localization
version: 0
published: true
---

This document specifies the REST interface for Linear Error Localization using *job* and *data* resources as specified in" (REST_interface.md).


The service is named: `LEL` (Linear Error Localization).

## Input data

```json
   "input" : {
      "data": "http://mysite.com/mydata.csv",
      "rules": "http://mysite.com/myrules.txt",
      "weights": "http://mysite.com/myweights.csv",
  }
```
### Input: `data`
The data resource `data` is an international CSV format file (separator= "," and decimal sign = ".") in which the first line are the names of the columns.
This is the data that should be checked for errors

### Input: `rules`
The text resource `rules` is an UTF8 text file in which each line contains a linear restriction rule.

The rules supported can have the following forms:
- `2*x + 3*y < z - 2`
- `2*x + 3*y > z - 2`
- `2*x + 3*y >= z - 2`
- `2*x + 3*y <= z - 2`
- `2*x + 3*y == z - 2`

### Input: `weights`
Optional parameter. These weights are used in the determining what variables should be corrected by taking the minimum of the weighted sum of these variables.
If not specified, all weights used  1.
If `input.weights` has one row, these weights will be used for all rows of `input.data`.
If `input.weights` has the same number of rows as `input.data`: each row of `input.weights` corresponds to the row in `input.data`.
Otherwise it results in an error.

## Result data

```json
 "result": {
    "adapt": "http://example.com/LEL/job/1234/result/adapt.csv",
    "status" : "http://example.com/LEL/job/1234/result/status.csv"
  }
```

### Result: `adapt`
`adapt.csv`  is a international CSV file (sep=",", dec="."). Each row of `result.adapt` corresponds to the same row number of `input.data`. 
The columns of `result.adapt` equal the columns of `input.data`. 
The values in the column are "true" (corresponding field in `input.data` is considered erronous)  or "false" (field is considered valid.),

### Result: `status`
`status`  is a international CSV file (sep=",", dec="."). Each row of `result.status` corresponds to the same row number of `input.data`. 
The column of status contain 
- "weight" : the optimal solution found
- "duration": the duration for finding a solution

# Using the service

## `POST` /LEL

Creates a new job for linear rule checking On succesful creation http status code 201 is returned with a url to the newly created job.
The minimal information that is needed are:
- `name`: used by the calling process to name this job
- `input`: the input parameters of the service
  - `data`: an url to a CSV file
  - `rules`: an url to a text file with rules
Optional:
- `on_end`: a callback url. When the job is ended (finished or error), the service will `POST` the job resource to this url.

This is the place where new linear rule checking jobs can be submitted and job information can be retrieved

**All other properties will be ignored.**

The service will create an `id` and URL for the new job.

Format in JSON:
```json
{  "name" : "my_process",
   "input" : {
      "data": "http://mysite.com/mydata.csv",
      "rules": "http://mysite.com/myrules.txt",
      "weigths": "http://mysite.com/myweights.txt",
  },
  "on_end" : "http://callback.com"
}
```
### `GET` LEL/job

Retrieves all active jobs as an array of jobs (see `/job/<id>`)

## `GET` "LEL/job/<id>"

Returns information on the status of the job and links to the output data.
If the job is not ended, these may not yet be available.

Format:
```json
{
 "id" : "1234",
 "url" : "http://example.com/LEL/job/1234",
 "version": "0.0.1",
 "name" : "my_process",
 "status" : "created" | "running" | "finished" | "error",
 "input" : {
    "data": "http://mysite.com/mydata.csv",
    "rules": "http://mysite.com/myrules.txt",
    "weights": "http://mysite.com/weights.txt"
  },
 "on_end" : "http://callback.com"
 "result": {
    "adapt": "http://example.com/LEL/job/1234/result/adapt.csv",
    "status": "http://example.com/LEL/job/1234/result/status.csv"
  }
 "log": {"url": "http://example.com/LEL/job/1234/log", "type":"text"},
 "created": 2014-01-01T12:00 ,
 "started": 2014-01-01T12:00 ,
 "ended": 2014-01-01T12:01 ,
}
```

### `DELETE` "LEL/job/<id>"

Cancels the job and deletes all data belonging to the job from the service. 

### `GET` "LEL/job/<id>/result/checks"

Retrieve the checks data file that was generated by this job. If the job is still running, this may return "not available".
Example:

```
http://example.com/service/job/1234/result/checks
```

### `GET` "LEL/job/<id>/log"

Retrieves the logging information of this job. Typically this is a text file.

Example:
```
http://example.com/LEL/job/1234/log
```
