---
author: "Jan van der Laan, Edwin de Jonge"
title: REST API for Linear Rule Checking
version: 0
published: true
---

This document specifies the REST interfce for Linear Rule Checking using *job* and *data* resource as specified in (REST_interface.md).


The service is named: `LRC` (Linear Rule Checking).

## Input data

```json
   "input" : {
      "data": "http://mysite.com/mydata.csv",
      "rules": "http://mysite.com/myrules.txt",
  }
```
### Input: `data`
The data resource `data` is an international CSV format file (separator= "," and decimal sign = ".") in which the first line are the names of the columns

### Input: `rules`
The text resource `rules` is an UTF8 text file in which each line contains a linear restriction rule.

The rules supported can have the following forms:

- `2*x + 3*y < z - 2`
- `2*x + 3*y > z - 2`
- `2*x + 3*y >= z - 2`
- `2*x + 3*y <= z - 2`
- `2*x + 3*y == z - 2`

### Result data

```json
 "result": {
    "checks": "http://example.com/LRC/job/1234/result/checks",
  }
```

### Result: `checks`
Checks is a international CSV file (sep=",", dec="."). The column number corresponds to the line number of the rules.
So the first column is the first rule in `input.rules`. The rows of `result.checks` correspond to the rows of `input.data`.




# Using the service


## `POST /LRC`

Creates a new job for linear rule checking On succesful creation http status code 201 is returned with a url to the newly created job.
The minimal information that is needed are:
- `name`: used by the calling process to name this job
- `input`: the input parameters of the service
  - `data`: an url to a CSV file
  - `rules`: an url to a text file with rules
Optional:
- `on_end`: a callback url. When the job is ended (finished or error), the service will `POST` the job resource to this url.

This is the place where new linear rule checking jobs can be submitted and job information can be retrieved

**All other properties will be ignored.**

The service will create an `id` and URL for the new job.

Format in JSON:
```json
{  "name" : "my_process",
   "input" : {
      "data": "http://mysite.com/mydata.csv",
      "rules": "http://mysite.com/myrules.txt",
  },
  "on_end" : "http://callback.com"
}
```
### `GET /LRC/job`

Retrieves all active jobs as an array of jobs (see `/job/<id>`)

## `GET /LRC/job/<id>`

Returns information on the status of the job and links to the output data.
If the job is not ended, these may not yet be available.

Format:
```json
{
 "id" : "1234",
 "url" : "http://example.com/LRC/job/1234",
 "version": "0.0.1",
 "name" : "my_process",
 "status" : "created" | "running" | "finished" | "error",
 "input" : {
    "data": "http://mysite.com/mydata.csv",
    "rules": "http://mysite.com/myrules.txt",
  },
 "on_end" : "http://callback.com"
 "result": {
    "checks": "http://example.com/LRC/job/1234/result/checks",
  }
 "log": {"url": "http://example.com/LRC/job/1234/log", "type":"text"},
 "created": "2014-01-01T12:00" ,
 "started": "2014-01-01T12:00" ,
 "ended": "2014-01-01T12:01" ,
}
```

### `DELETE /LRC/job/<id>`

Cancels the job and deletes all data belonging to the job from the service. 

### `GET /LRC/job/<id>/result/checks`

Retrieve the checks data file that was generated by this job. If the job is still running, this may return "not available".
Example:

```
http://example.com/service/job/1234/result/checks
```

### `GET /LRC/job/<id>/log`

Retrieves the logging information of this job. Typically this is a text file.

Example:
```
http://example.com/LRC/job/1234/log
```

